{% extends 'base.html' %}
{% load static %}

{% block title %}{{ service.title }} | Sellux Plaster Ltd{% endblock %}

{% block content %}
<!-- Enhanced Hero Section -->
<section class="min-vh-85 d-flex align-items-center bg-black text-white position-relative overflow-hidden">
    <!-- Subtle Pattern Background -->
    <div class="position-absolute top-0 start-0 w-100 h-100 bg-pattern-dots opacity-5"></div>

    <!-- Floating Elements for Depth -->
    <div class="position-absolute top-20 start-10 w-30 h-30 rounded-circle bg-primary opacity-10 blur-3"></div>
    <div class="position-absolute bottom-10 end-20 w-20 h-20 rounded-circle bg-white opacity-5 blur-2"></div>

    <div class="container py-6 py-lg-8 position-relative z-1">
        <div class="row align-items-center gx-5 gy-6">
            <!-- Content Column -->
            <div class="col-lg-6 animate__animated animate__fadeIn" data-aos="fade-right">
                <!-- Premium Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-5">
                    <ol class="breadcrumb mb-0 small text-uppercase ls-2">
                        <li class="breadcrumb-item">
                            <a href="{% url 'services:service_list' %}" class="text-primary text-decoration-none opacity-75 hover-opacity-100 transition-opacity">
                                Services
                            </a>
                        </li>
                        <li class="breadcrumb-item active text-white-50" aria-current="page">{{ service.title }}</li>
                    </ol>
                </nav>

                <!-- Strategic Typography -->
                <div class="mb-1">
                    <span class="badge bg-primary text-black fw-bold px-3 py-2 rounded-pill ls-1 mb-4">
                        Premium Service
                    </span>
                </div>

                <h1 class="display-3 fw-light mb-4 ls-1 lh-1">{{ service.title }}</h1>
                <div class="border-start border-primary border-4 ps-4 ms-2 mb-5">
                    <p class="lead text-white-50 mb-0 fs-5 lh-base fw-light">
                        {{ service.short_description }}
                    </p>
                </div>

                <!-- Action Buttons with Improved Hierarchy -->
                <div class="d-flex flex-column flex-sm-row gap-3 align-items-start align-items-sm-center">
                    <a href="{% url 'contact:contact_us' %}"
                       class="btn btn-primary btn-lg rounded-1 px-5 py-3 fw-bold ls-1 shadow-float position-relative overflow-hidden">
                        <span class="position-relative z-1">
                            Request Consultation <i class="bi bi-arrow-right ms-2"></i>
                        </span>
                        <div class="position-absolute top-0 start-0 w-100 h-100 bg-white opacity-0 hover-opacity-10 transition-opacity"></div>
                    </a>
                    <a href="#process"
                       class="btn btn-outline-light btn-lg rounded-1 px-4 py-3 fw-light ls-1 border-opacity-25 hover-border-opacity-100 transition-all">
                        Explore Our Process
                    </a>
                </div>

                <!-- Trust Indicators -->
                <div class="d-flex align-items-center gap-4 mt-5 pt-3 text-white-50 small">
                    <div class="d-flex align-items-center gap-2">
                        <i class="bi bi-award-fill text-primary"></i>
                        <span>Architectural Grade</span>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <i class="bi bi-shield-check text-primary"></i>
                        <span>Lifetime Warranty</span>
                    </div>
                </div>
            </div>

            <!-- Visual Column -->
            <div class="col-lg-6 animate__animated animate__fadeIn" data-aos="fade-left" data-aos-delay="200">
                <div class="position-relative">
                    <!-- Premium Image Container -->
                    <div class="rounded-2 overflow-hidden shadow-2xl position-relative">
                        {% if service.image %}
                        <img src="{{ service.image.url }}"
                             class="img-fluid w-100 transition-all hover-scale"
                             alt="{{ service.title }}"
                             style="height: 600px; object-fit: cover;">
                        {% else %}
                        <div class="bg-dark d-flex align-items-center justify-content-center" style="height: 600px;">
                            <i class="bi {{ service.icon|default:'bi-layers' }} display-1 text-white opacity-10"></i>
                        </div>
                        {% endif %}

                        <!-- Overlay Gradient -->
                        <div class="position-absolute bottom-0 start-0 w-100 h-50 bg-gradient-to-top opacity-70"></div>
                    </div>

                    <!-- Quality Badge -->
                    <div class="position-absolute bottom-0 start-0 m-5 bg-black bg-opacity-70 text-white p-3 rounded-2 shadow-lg backdrop-blur">
                        <span class="d-block fw-bold small text-uppercase ls-1 text-primary">Quality Standard</span>
                        <span class="fw-bold fs-6">Architectural Grade</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="position-absolute bottom-0 start-50 translate-middle-x mb-4">
        <a href="#process" class="text-white-50 hover-text-white transition-color">
            <i class="bi bi-chevron-down fs-4"></i>
        </a>
    </div>
</section>

<!-- Process Section -->
<section id="process" class="py-6 py-lg-8 bg-white position-relative">
    <!-- Subtle Background Pattern -->
    <div class="position-absolute top-0 end-0 w-50 h-100 bg-pattern-lines opacity-3"></div>

    <div class="container position-relative z-1">
        <div class="row gx-6 gy-6">
            <!-- Main Content -->
            <div class="col-lg-8">
                <div class="pe-lg-6">
                    <!-- Section Header -->
                    <div class="d-flex align-items-center gap-4 mb-6">
                        <div class="bg-primary text-black p-3 rounded-2 shadow-sm">
                            <i class="bi {{ service.icon|default:'bi-gear' }} fs-2"></i>
                        </div>
                        <div>
                            <span class="d-block text-primary small fw-bold ls-1 mb-1">METHODOLOGY</span>
                            <h2 class="display-5 fw-light mb-0">The Installation Lifecycle</h2>
                        </div>
                    </div>

                    <!-- Service Description -->
                    <div class="service-description fs-5 text-muted mb-6 lh-lg fw-light">
                        {{ service.description|linebreaks }}
                    </div>

                    <!-- Key Features -->
                    <div class="row g-4 mb-6">
                        <div class="col-md-6">
                            <div class="p-4 bg-light rounded-2 h-100 border-start border-primary border-4 shadow-sm hover-shadow-lg transition-shadow">
                                <div class="d-flex align-items-center gap-3 mb-3">
                                    <i class="bi bi-building text-primary fs-4"></i>
                                    <h5 class="fw-bold mb-0">Structural Integrity</h5>
                                </div>
                                <p class="small text-muted mb-0 lh-base">We utilize heavy-gauge galvanized metal profiles for framing to prevent sagging and ensure decades of durability.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="p-4 bg-light rounded-2 h-100 border-start border-primary border-4 shadow-sm hover-shadow-lg transition-shadow">
                                <div class="d-flex align-items-center gap-3 mb-3">
                                    <i class="bi bi-box-seam text-primary fs-4"></i>
                                    <h5 class="fw-bold mb-0">Material Choice</h5>
                                </div>
                                <p class="small text-muted mb-0 lh-base">Technical selection of fire-rated or moisture-resistant boards based on the specific site requirements.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar - Sticky Content -->
            <div class="col-lg-4">
                <div class="sticky-top" style="top: 120px;">
                    {% if service.recommended_products.all %}
                    <!-- Technical Specs Card -->
                    <div class="card border-0 bg-black text-white shadow-lg rounded-2 p-4 mb-5 overflow-hidden position-relative">
                        <div class="position-absolute top-0 start-0 w-100 h-100 bg-pattern-dots opacity-10"></div>
                        <div class="position-relative z-1">
                            <h5 class="fw-bold mb-4 ls-1 border-bottom border-secondary pb-3 text-primary">
                                Technical Specifications
                            </h5>
                            <p class="text-white-50 small mb-4 fw-light">
                                Required materials for a professional {{ service.title }} finish:
                            </p>

                            <div class="d-flex flex-column gap-3 mb-4">
                                {% for product in service.recommended_products.all %}
                                <div class="d-flex align-items-center gap-3 bg-white bg-opacity-5 p-3 rounded-2 border border-white border-opacity-10 transition-all hover-bg-opacity-20">
                                    <img src="{{ product.image.url }}" class="rounded-2 shadow-sm" style="width: 50px; height: 50px; object-fit: cover;">
                                    <div class="flex-grow-1">
                                        <h6 class="fw-bold mb-0 small">{{ product.name }}</h6>
                                        <span class="text-primary small fw-bold">GHS {{ product.price|floatformat:2 }}</span>
                                    </div>
                                    <a href="{{ product.get_absolute_url }}" class="btn btn-outline-primary btn-sm rounded-1 transition-all">
                                        <i class="bi bi-arrow-right"></i>
                                    </a>
                                </div>
                                {% endfor %}
                            </div>
                            <a href="{% url 'catalogue:product_list' %}" class="btn btn-primary w-100 rounded-1 fw-bold text-black py-3 shadow-float">
                                Source All Materials
                            </a>
                        </div>
                    </div>
                    {% endif %}

                    <!-- CTA Card -->
                    <div class="card border-0 bg-black text-white rounded-2 p-5 text-center shadow-lg border border-white border-opacity-10 mb-5">
                        <h4 class="fw-light mb-3 ls-1">Home of <br><span class="text-primary fw-bold">Affordable Luxury</span></h4>
                        <p class="small text-white-50 mb-5 fw-light">We bridge the gap between world-class finishes and practical project budgets.</p>
                        <a href="{% url 'contact:contact_us' %}" class="btn btn-primary rounded-1 py-3 w-100 fw-bold text-black shadow-float position-relative overflow-hidden">
                            <span class="position-relative z-1">Begin Evaluation</span>
                            <div class="position-absolute top-0 start-0 w-100 h-100 bg-white opacity-0 hover-opacity-10 transition-opacity"></div>
                        </a>
                    </div>

                    <!-- Custom Request Card -->
                    <div class="card border-0 bg-primary text-black rounded-2 p-4 shadow-lg transition-all hover-shadow-xl">
                        <div class="d-flex align-items-center gap-3 mb-3">
                            <i class="bi bi-pencil-square fs-3"></i>
                            <h5 class="fw-bold mb-0">Custom Concept?</h5>
                        </div>
                        <p class="small opacity-75 mb-4 fw-light">Have a unique vision? Our artisans can engineer a bespoke solution for you.</p>
                        <a href="{% url 'custom_requests:request_create' %}" class="btn btn-dark rounded-1 btn-sm w-100 fw-bold py-3 text-uppercase ls-1">
                            Request Bespoke Design
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* Enhanced Typography & Spacing */
    .min-vh-85 { min-height: 85vh; }
    .py-6 { padding-top: 5rem; padding-bottom: 5rem; }
    .py-8 { padding-top: 7rem; padding-bottom: 7rem; }
    .ls-1 { letter-spacing: 1px; }
    .ls-2 { letter-spacing: 2px; }
    .lh-1 { line-height: 1.1; }

    /* Visual Effects */
    .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    .blur-2 { filter: blur(2px); }
    .blur-3 { filter: blur(3px); }
    .backdrop-blur { backdrop-filter: blur(10px); }

    /* Gradient Overlays */
    .bg-gradient-to-top {
        background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
    }

    /* Premium Interactions */
    .hover-scale { transition: transform 0.5s ease; }
    .hover-scale:hover { transform: scale(1.03); }

    .transition-all { transition: all 0.3s ease; }
    .transition-opacity { transition: opacity 0.3s ease; }
    .transition-color { transition: color 0.3s ease; }
    .transition-shadow { transition: box-shadow 0.3s ease; }

    .hover-opacity-100:hover { opacity: 1 !important; }
    .hover-text-white:hover { color: #fff !important; }
    .hover-border-opacity-100:hover { border-color: rgba(255,255,255,1) !important; }
    .hover-bg-opacity-20:hover { background-color: rgba(255, 255, 255, 0.2) !important; }
    .hover-shadow-lg:hover { box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important; }
    .hover-shadow-xl:hover { box-shadow: 0 20px 40px rgba(0,0,0,0.2) !important; }

    /* Button Enhancements */
    .shadow-float {
        box-shadow: 0 8px 25px rgba(217, 106, 0, 0.3);
    }
    .shadow-float:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 35px rgba(217, 106, 0, 0.4);
    }

    /* Background Patterns */
    .bg-pattern-dots {
        background-image: radial-gradient(currentColor 1px, transparent 1px);
        background-size: 10px 10px;
        color: rgba(255,255,255,0.05);
    }

    .bg-pattern-lines {
        background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 5px,
            rgba(0,0,0,0.02) 5px,
            rgba(0,0,0,0.02) 10px
        );
    }

    /* Rounded Corners Refinement */
    .rounded-1 { border-radius: 0.5rem; }
    .rounded-2 { border-radius: 1rem; }
</style>

<script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add intersection observer for scroll-triggered animations
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize AOS (Animate On Scroll) if available
        if (typeof AOS !== 'undefined') {
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
        }
    });
</script>
{% endblock %}
