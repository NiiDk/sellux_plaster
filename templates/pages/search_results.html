{% extends 'base.html' %}

{% block title %}Search Results for "{{ query }}" | Sellux Plaster Ltd{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="mb-5">
        <h1 class="display-5 fw-bold mb-2">Search <span class="text-primary">Results</span></h1>
        <p class="text-muted">Showing results for "<span class="fw-bold">{{ query }}</span>"</p>
    </div>

    {% if not product_results and not project_results %}
        <div class="text-center py-5 bg-white rounded-5 shadow-sm">
            <i class="bi bi-search text-muted display-1 mb-4"></i>
            <h3>No results found</h3>
            <p class="text-muted">We couldn't find anything matching your search. Try different keywords.</p>
            <a href="/" class="btn btn-primary rounded-pill px-4 mt-3">Back to Home</a>
        </div>
    {% else %}
        <!-- Products Section -->
        {% if product_results %}
            <div class="mb-5">
                <h3 class="fw-bold border-bottom pb-3 mb-4"><i class="bi bi-box-seam me-2 text-primary"></i> Catalogue Matches</h3>
                <div class="row g-4">
                    {% for product in product_results %}
                        <div class="col-md-3">
                            <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden">
                                <img src="{{ product.image.url }}" class="card-img-top" style="height: 180px; object-fit: cover;">
                                <div class="card-body p-3">
                                    <h6 class="fw-bold mb-1">{{ product.name }}</h6>
                                    <p class="text-primary fw-bold small mb-2">GHâ‚µ{{ product.price }}</p>
                                    <a href="{{ product.get_absolute_url }}" class="btn btn-outline-dark btn-sm rounded-pill w-100">View Product</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        <!-- Projects Section -->
        {% if project_results %}
            <div>
                <h3 class="fw-bold border-bottom pb-3 mb-4"><i class="bi bi-gallery me-2 text-primary"></i> Portfolio Matches</h3>
                <div class="row g-4">
                    {% for project in project_results %}
                        <div class="col-md-3">
                            <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden">
                                <img src="{{ project.image.url }}" class="card-img-top" style="height: 180px; object-fit: cover;">
                                <div class="card-body p-3">
                                    <h6 class="fw-bold mb-1">{{ project.title }}</h6>
                                    <p class="text-muted small mb-2">{{ project.completion_date|date:"Y" }}</p>
                                    <a href="{% url 'portfolio:project_detail' project.slug %}" class="btn btn-outline-primary btn-sm rounded-pill w-100">View Project</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
